# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a ROS2 workspace containing robotics packages for TurtleBot navigation and control. The workspace follows standard ROS2 colcon workspace structure with separate packages for different functionalities.

## Workspace Structure

- `src/move_square_cpp/`: C++ package for basic turtle movement control using turtlesim
- `src/turtlebot_avoidance/`: Python package for obstacle avoidance and YOLO-based navigation
- `src/camera_test/`: Camera testing utilities
- `src/config/`: Configuration files directory
- `src/launch/`: Launch files directory
- `build/`, `install/`, `log/`: Standard ROS2 build artifacts (generated by colcon)
- `yolov8n.pt`: YOLO model weights for object detection

## Build System and Commands

This workspace uses colcon (available at `/home/ty/.local/bin/colcon`) as the build tool.

### Essential Commands

```bash
# Build all packages
colcon build

# Build specific package
colcon build --packages-select move_square_cpp
colcon build --packages-select turtlebot_avoidance

# Source the workspace after building
source install/setup.bash

# Run C++ node
ros2 run move_square_cpp line_follower_node

# Run Python nodes
ros2 run turtlebot_avoidance obstacle_avoidance
ros2 run turtlebot_avoidance simple_camera_test
ros2 run turtlebot_avoidance yolo_navigation
```

### Package Types and Dependencies

**move_square_cpp** (C++ ament_cmake package):
- Dependencies: rclcpp, geometry_msgs, turtlesim
- Executable: `line_follower_node` (built from move_square_node.cpp)
- Used for basic turtle control and wall avoidance behavior

**turtlebot_avoidance** (Python ament_python package):
- Dependencies: rclpy, geometry_msgs, sensor_msgs, cv_bridge
- Python dependencies: ultralytics (YOLO), cv2 (OpenCV)
- Executables:
  - `obstacle_avoidance`: Basic obstacle avoidance using laser scan
  - `simple_camera_test`: Camera functionality testing
  - `yolo_navigation`: Advanced navigation with YOLO object detection

## Architecture Notes

- The C++ package implements a state machine (FORWARD/TURN states) for turtle behavior
- The Python package includes conditional YOLO imports with fallback behavior if vision dependencies are missing
- YOLO model weights are stored in workspace root (`yolov8n.pt`)
- Camera topics use `/camera/image_raw` convention
- Movement commands published to `/cmd_vel` topic
- Laser scan data consumed from `/scan` topic

## Development Workflow

1. Make code changes in `src/` directories
2. Build with `colcon build` (or package-specific build)
3. Source the workspace: `source install/setup.bash`
4. Test with `ros2 run` commands
5. For YOLO functionality, ensure `ultralytics` pip package is installed